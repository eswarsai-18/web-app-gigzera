<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Website Redesign Project</title>
  <link rel="stylesheet" href="/Css/GigzeraSingleProjectTrackerGigz.css">
</head>
<body>
  <div class="container">
    <!-- Sidebar -->
    <div class="sidebar">
      <h2>Website Redesign Project</h2>
      <p class="opp-id">OPP ID: #234567</p>
      <h3>Project Description</h3>
      <p>Complete redesign of e-commerce website including UI/UX improvements and responsive design implementation.</p>
      <h3>Deliverables</h3>
      <ul>
        <li>Wireframes</li>
        <li>UI Design</li>
        <li>Responsive Layout</li>
        <li>Design System</li>
      </ul>
      <h3>Budget</h3>
      <p>$12,000</p>
      <h3>Timeline</h3>
      <p>Start: Jan 15, 2025<br>End: Mar 15, 2025</p>
    </div>

    <!-- Main Content -->
    <div class="main-content">
      <!-- Project Progress -->
      <div class="project-header">
        <div class="progress-header-container">
          <h3>Project Progress</h3>
          <span class="progress-meta">
            Last updated by John Doe â€¢ 2 hours ago
            <span class="progress-percentage">
              <span id="progressPercentage" contenteditable="false">75%</span>
              <img src="edit-icon.png" alt="Edit" id="editProgressIcon" class="edit-icon">
            </span>
          </span>
        </div>
        <div class="progress-bar">
          <div class="progress" id="progressBar" style="width: 75%;"></div>
        </div>
      </div>

      <!-- Tasks -->
      <div class="tasks-box">
        <div class="tasks-header">
          <h3>Tasks</h3>
          <button class="add-task-btn" id="addTaskBtn">+ Add Task</button>
        </div>
        <div class="task-list">
          <div class="task">
            <div class="task-details">
              <input type="checkbox">
              <label>Create wireframes</label>
              <select>
                <option>In Progress</option>
                <option>Completed</option>
                <option>Pending</option>
              </select>
            </div>
            <textarea placeholder="Add a comment..."></textarea>
          </div>
          <div class="task">
            <div class="task-details">
              <input type="checkbox">
              <label>Design system setup</label>
              <select>
                <option>Completed</option>
                <option>In Progress</option>
                <option>Pending</option>
              </select>
            </div>
            <textarea placeholder="Add a comment..."></textarea>
          </div>
        </div>
      </div>
    </div>

    <!-- Messages -->
    <div class="messages">
      <h3 class="messages-header">Messages</h3>
      <div id="messagesContainer">
        <!-- Example messages -->
        <div class="message">
          <img src="https://cdn.yellowmessenger.com/kdwjejFHTShg1734610489031.jpeg" alt="User" class="profile-pic">
          <div class="message-content">
            <p>Can you share the latest wireframes?</p>
            <small>10:30 AM</small>
          </div>
        </div>
        <div class="message">
          <img src="https://cdn.yellowmessenger.com/cMvNTJMdqlfz1734610513305.jpeg" alt="User" class="profile-pic">
          <div class="message-content">
            <p>I'll share them by end of day.</p>
            <small>10:32 AM</small>
          </div>
        </div>
      </div>
      <div class="input-box">
        <input type="text" id="messageInput" placeholder="Type your message...">
      </div>
    </div>
  </div>

<script>
  // JavaScript to add new task when button is clicked
  document.getElementById('addTaskBtn').addEventListener('click', () => {
    const taskList = document.querySelector('.task-list');
    
    // Create new task div
    const newTask = document.createElement('div');
    newTask.classList.add('task');
    newTask.innerHTML = `
      <div class="task-details">
        <input type="checkbox">
        <label>New Task</label>
        <select>
          <option>In Progress</option>
          <option>Completed</option>
          <option>Pending</option>
        </select>
      </div>
      <textarea placeholder="Add a comment..."></textarea>
    `;
    
    taskList.appendChild(newTask);
  });

  // JavaScript to enable editing for project progress
  const progressPercentage = document.getElementById('progressPercentage');
  const editProgressIcon = document.getElementById('editProgressIcon');
  const progressBar = document.getElementById('progressBar');

  editProgressIcon.addEventListener('click', () => {
    // Toggle contenteditable attribute
    const isEditable = progressPercentage.getAttribute('contenteditable') === 'true';
    progressPercentage.setAttribute('contenteditable', !isEditable);
  
    // Focus the element if it's now editable
    if (!isEditable) {
      progressPercentage.focus();
      editProgressIcon.src = "save-icon.png"; // Change icon to save (optional)
    } else {
      editProgressIcon.src = "edit-icon.png"; // Revert icon to edit
      // Validate and update the progress bar width
      const value = parseInt(progressPercentage.textContent.replace('%', '').trim());
      if (!isNaN(value) && value >= 0 && value <= 100) {
        progressBar.style.width = `${value}%`;
      } else {
        alert("Please enter a valid percentage between 0 and 100.");
        progressPercentage.textContent = progressBar.style.width; // Revert to previous value
      }
    }
  });

  // Message Input Functionality
  const messageInput = document.getElementById('messageInput');
  const messagesContainer = document.getElementById('messagesContainer');
  messageInput.addEventListener('keypress', (e) => {
    if (e.key === 'Enter' && messageInput.value.trim() !== '') {
      const newMessage = `
        <div class="message">
          <img src="https://cdn.yellowmessenger.com/cMvNTJMdqlfz1734610513305.jpeg" alt="You">
          <p>
            ${messageInput.value}<br>
            <small>${new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}</small>
          </p>
        </div>
      `;
      messagesContainer.insertAdjacentHTML('beforeend', newMessage);
      messageInput.value = '';
      messagesContainer.scrollTop = messagesContainer.scrollHeight;
    }
  });
</script>
</body>
</html>
